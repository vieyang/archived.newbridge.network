<nav class="navbar full">
  <div class="container">

    <input type="checkbox" id="navbar-check" />

    <div class="header">

      <label for="navbar-check" class="toggle">
        M
      </label>

      <a href="{{ .Site.BaseURL | relLangURL }}">
        {{- with .Site.Params.NewDocsLogo -}}
        <img src="{{ . | relURL }}" alt="Logo"  class="logo invertable" />
        {{- end -}}
        <span style="display: none;">{{ .Site.Title }}</span>
      </a>

      <label class="toggle">
        R
      </label>
    </div>


    <div class="navbar-collapse">

      <ul class="navbar-nav">
        <li class="nav-item">
          <a href="./#">Home</a>
        </li>
        <li class="nav-item">
          <a href="./#">Start</a>
        </li>
        <li class="nav-item">
          <a href="./#">Docs</a>
        </li>
      </ul>

      {{ if default true .Site.Params.NewDocsSearch }}
      <div class="search-form">
        <input type="text" id="navbar-search-input" placeholder="{{ i18n "Search" }}" aria-label="{{ i18n "Search" }}" maxlength="64" data-hotkeys="s/" />
        <div class="newdocs-search-spinner hidden"></div>
        <div class="search-results">
          <ul id="navbar-search-results"></ul>
        </div>
      </div>
      {{ end }}

    </div>
    

  </div>
</nav>

<label class="toggle-switch" for="toggle-input">
  <input id="toggle-input" type="checkbox">
  <div class="toggle-switch__control"></div>
</label>


<style>
  .toggle-switch {
    display: block;
}

#toggle-input {
    display: none;
}

.toggle-switch__control {
    width: 40px;
    height: 14px;
    border-radius: 7px;
    position: relative;

    background: #999;

    cursor: pointer;

    margin: 50px auto;
}

.toggle-switch__control::after {
    content: '';
    display: block;

    width: 20px;
    height: 20px;
    border-radius: 10px;

    position: absolute;
    left: -1px;
    top: -3px;

    background: var(--background-color);

    transition: left 0.25s;
}

#toggle-input:checked + .toggle-switch__control::after {
    left: 21px;
}
@media (prefers-color-scheme: dark) {
  :root {
    --background-color: #222;
    --font-color: #f6f6f6;
    --font-lighter-color: #ccc;
  }

  :root.light {
    --background-color: #f6f6f6;
    --font-color: #222;
    --font-lighter-color: #444;
  }
}
</style>


<script>
function setTheme(theme, persist = false) {
  const on = theme;
  const off = theme === 'light' ? 'dark' : 'light'

  const htmlEl = document.documentElement;
  htmlEl.classList.add(on);
  htmlEl.classList.remove(off);

  if (persist) {
      localStorage.setItem('preferred-theme', theme);
  }
}
const toggle = document.getElementById('toggle-input');
const lightIcon = document.getElementById('light-icon');
const darkIcon = document.getElementById('dark-icon');

function updateUI(theme) {
    toggle.checked = theme === 'light';

    if (theme === 'light') {
        lightIcon.classList.add('active');
        darkIcon.classList.remove('active');
    } else {
        darkIcon.classList.add('active');
        lightIcon.classList.remove('active');
    }
}

toggle.addEventListener('click', () => {
    const theme = toggle.checked ? 'light' : 'dark';
    setTheme(theme, true);
    updateUI(theme);
});

const osPreference = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
const preferredTheme = localStorage.getItem('preferred-theme') || osPreference;

setTheme(preferredTheme, false);
updateUI(preferredTheme);
</script>


